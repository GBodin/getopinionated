{% extends "base.html" %}
{% load filters %}
{% load macros %}
{% loadmacros "proposal/proposal-macro.html" %}
{% loadmacros "proposal/tag-macro.html" %}

{% block extrastyle %}
	<script type="text/javascript" src="{{STATIC_URL}}js/timeline.js"></script>
	<link rel="stylesheet" href="{{STATIC_URL}}css/proposing.css" type="text/css" charset="utf-8" />
	<script type="application/javascript">
		{% if timeline %}
		    /*** data ***/
		    var timelineData = {{timeline.toJson|safe}};
		    $(document).ready(function(){
		        drawTimeline(timelineData);
		    });
	    {% endif %}
	</script>
{% endblock %}
{% block title %}{% include "title.html" with subtitle="Proposals" %}{% endblock %}

{% block beforecontent %}
{% endblock %}
{% block content %}
    {% if timeline %}
        <h1>Timeline</h1>
        <div class="timelinecanvaspane"><canvas id="timeline"></canvas></div>
        <br />
    {% endif %}
    <div class="proposal-list">

    	{% if title %}
	    	<h1>{{ title }}</h1>
	    {% else %}
	    	<h1>
	    		Proposals:
	    		<a href="{% url proposals-list "latest" %}">Latest</a>
	    		-
	    		<a href="{% url proposals-list "voting" %}">Voting</a>
	    		-
	    		<a href="{% url proposals-list "all" %}">All</a>
    		</h1>
		{% endif %}
	
	    {% if latest_proposal_list %}
	        <ul>
	        {% for proposal in latest_proposal_list %}
	        	<li>
	        		{% usemacro proposal-for-list proposal %}
	        	</li>
	        {% endfor %}
	        </ul>
	    {% else %}
	        <p>No proposals are available.</p>
	    {% endif %}
	</div>
	<div class="tag-list">
		<h1>Most used tags</h1>
		{% for tag in taglist %}
			<div class="tag-item">
				{% usemacro tag-medium tag %}
			</div>
		{% endfor %}
	</div>
{% endblock %}
