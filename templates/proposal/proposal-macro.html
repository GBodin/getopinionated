{% load macros %}
{% load humanize %}
{% load filters %}
{% loadmacros "accounts/member-macro.html" %}
{% loadmacros "proposal/tag-macro.html" %}

{% macro proposal-for-list proposal %}
	<div class="row-fluid show-grid">
		<div class="span1">
			<div class="upvotescore">
				<div class="mini-counts">
					{{ proposal.totalvotescore|smallint }}
				</div>
				<div class="numberblocktext">
					votes
				</div>
			</div>
		</div>
		<div class="span1">
			<div class="numberofcomments">
				<div class="mini-counts">
					{{ proposal.number_of_comments|smallint }}
				</div>
				<div class="numberblocktext">
					comments
				</div>
			</div>
		</div>
		<div class="span1">
			<div class="views">
				<div class="mini-counts">
					{{ proposal.views|smallint }}
				</div>
				<div class="numberblocktext">
					views
				</div>
			</div>
		</div>
		<div class="span9">
			<div class="summary">
				<a href="{% url proposals-detail proposal.slug %}">{{ proposal.title }}</a>
			</div>
			<br/>
			<div class="proposal-tags">
				<div class="label label-inverse">
					{{ proposal.get_voting_stage_display }}
				</div>
				{% for tag in proposal.tags.all|slice:":4" %}
					{% if forloop.counter0 == 3 %}
						<div class="label label-info">
							...
						</div>
					{% else %}
						{% usemacro tag-small tag %}
					{% endif %}
				{% endfor %}
			</div>
			<div class="creator-small">
				{% usemacro user-small proposal.creator proposal.create_date%}
			</div>
		</div>
	</div>
{% endmacro %}